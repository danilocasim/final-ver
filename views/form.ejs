
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <link rel="stylesheet" href="main.css" />

    <title>Voice Legal Consultation</title>
    <script src="https://cdn.jsdelivr.net/npm/tailwindcss-jit-cdn"></script>
  </head>
  <body class="bg-background text-white font-sans min-h-screen">
    <!-- Navbar placeholder -->
    <div class="bg-[#16213e] p-4 mb-6">
      <h1 class="text-xl font-bold">Voice Legal Assistance</h1>
    </div>

    <!-- Main Panel -->
    <main class="flex justify-center px-6 lg:px-8">
      <div class="w-full max-w-2xl">
        <!-- Form Card -->
        <div class="bg-[#16213e] rounded-xl p-6 space-y-6">
          <!-- Header -->
          <div>
            <h2 class="text-2xl font-bold mb-1">Start Your Legal Assistance Call</h2>
            <p class="text-gray-400">Select a category and provide your information to begin</p>
          </div>

          <!-- Name Input -->
          <div class="space-y-2">
            <label for="name" class="block text-sm font-medium">Your Name (Optional)</label>
            <input
              type="text"
              id="name"
              class="w-full p-3 rounded-lg bg-[#1a1a2e] border border-gray-700 text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-primary"
              placeholder="Juan Dela Cruz"
              value="<%= typeof name !== 'undefined' ? name : '' %>"
            />
            <p class="text-sm text-gray-400">
              This will be used in your generated report
            </p>
          </div>

          <!-- Category Selection -->
          <div class="space-y-3">
            <label class="block text-sm font-medium">Select Legal Category</label>
            <div class="grid gap-3 sm:grid-cols-3">
              <% categories.forEach(function(category){ %>
                <div
                  class="cursor-pointer rounded-lg border p-4 text-center transition-all
                    <%= selectedCategory === category.id ? 'border-primary bg-primary/10 ring-2 ring-primary' : 'hover:border-primary/50' %>"
                  onclick="selectCategory('<%= category.id %>')"
                >
                  <div class="mb-2 flex justify-center">
                    <div class="p-3 rounded-lg
                      <%= selectedCategory === category.id ? 'bg-primary text-primary-foreground' : 'bg-secondary text-white' %>"
                    >
                      <%= category.icon %>
                    </div>
                  </div>
                  <h3 class="text-sm font-semibold mb-1"><%= category.title %></h3>
                  <p class="text-xs text-gray-400"><%= category.description %></p>
                </div>
              <% }) %>
            </div>
          </div>

          <!-- Info Box -->
          <div class="rounded-lg bg-[#1a1a2e] p-4">
            <h4 class="font-semibold mb-2">What to expect:</h4>
            <ul class="space-y-1 text-sm text-gray-400">
              <li>• Voice call with AI legal assistant</li>
              <li>• Live transcription of conversation</li>
              <li>• Real-time action plan checklist</li>
              <li>• Downloadable legal summary report</li>
            </ul>
          </div>

          <!-- Start Call Button -->
          <button
            class="w-full mt-2 px-6 py-3 bg-primary text-white font-semibold rounded-lg hover:bg-primary/80 transition-colors flex justify-center items-center gap-2 disabled:opacity-50"
            id="startCallBtn"
            <%= !selectedCategory ? 'disabled' : '' %>
            onclick="startCall()"
          >
            Start Call
            ➡️
          </button>
        </div>
      </div>
    </main>

    <script>
      let selectedCategory = '<%= typeof selectedCategory !== "undefined" ? selectedCategory : "" %>';

      function selectCategory(id) {
        selectedCategory = id;
        // Rerender or reload page with selectedCategory if using server-side
        // For client-side highlight toggle, you can manipulate classes dynamically
        console.log("Selected category:", id);
      }

      function startCall() {
        if(selectedCategory) {
          window.location.href = "/call";
        }
      }
    </script>
  </body>
</html>
